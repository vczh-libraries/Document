<!DOCTYPE html>
<html>
<head>
    <title>kernelspecs.h</title>
    <link rel="stylesheet" href="../../Cpp.css" />
    <link rel="shortcut icon" href="../../favicon.ico" />
    <script type="text/javascript" src="../../Cpp.js" ></script>
</head>
<body>
<a class="button" href="../FileIndex.html">File Index</a>
<a class="button" href="../SymbolIndex.html">Symbol Index</a>
<br>
<br>
<div class="codebox"><div class="cpp_default"><div class="expandable"><div class="disabled">/*****************************************************************************\
*                                                                             *
* KernelSpecs.h - markers for documenting the semantics of driver APIs        *
*                 See DriverSpecs.h for detailed comments                     *
*                 See also &lt;SpecStrings.h&gt;                                    *
*                                                                             *
* Version 1.2.00                                                              *
*                                                                             *
* Copyright (c) Microsoft Corporation. All rights reserved.                   *
*                                                                             *
\*****************************************************************************/</div>
<div class="expanded"><div class="token cpp_comment ">/****************************************************************************
**                                                                             *
* KernelSpecs.h - markers for documenting the semantics of driver APIs        *
*                 See DriverSpecs.h for detailed comments                     *
*                 See also &lt;SpecStrings.h&gt;                                    *
*                                                                             *
* Version 1.2.00                                                              *
*                                                                             *
* Copyright (c) Microsoft Corporation. All rights reserved.                   *
*                                                                             *
\*****************************************************************************/</div></div></div>

<div class="expandable"><div class="disabled">/*****************************************************************************\
* NOTE                                                                        *
* NOTE                                                                        *
* NOTE                                                                        *
*   The macro bodies in this file are subject to change without notice.       *
*   Attempting to use the annotations in the macro bodies directly is not     *
*   supported.                                                                *
* NOTE                                                                        *
* NOTE                                                                        *
* NOTE                                                                        *
\*****************************************************************************/</div>
<div class="expanded"><div class="token cpp_comment ">/****************************************************************************
** NOTE                                                                        *
* NOTE                                                                        *
* NOTE                                                                        *
*   The macro bodies in this file are subject to change without notice.       *
*   Attempting to use the annotations in the macro bodies directly is not     *
*   supported.                                                                *
* NOTE                                                                        *
* NOTE                                                                        *
* NOTE                                                                        *
\*****************************************************************************/</div></div></div>

<div class="expandable"><div class="disabled">/*****************************************************************************\
* As noted in DriverSpecs.h, this header contains &quot;real&quot; definitions for
* annotations that either never appear in user space, or which are meaningles
* in user space and are #defined to nothing by DriverSpecs.h.
*
* Further commentary appears in DriverSpecs.h.
\*****************************************************************************/</div>
<div class="expanded"><div class="token cpp_comment ">/****************************************************************************
** As noted in DriverSpecs.h, this header contains &quot;real&quot; definitions for
* annotations that either never appear in user space, or which are meaningles
* in user space and are #defined to nothing by DriverSpecs.h.
*
* Further commentary appears in DriverSpecs.h.
\*****************************************************************************/</div></div></div>

<div class="disabled">#ifndef KERNELSPECS_H</div>
<div class="disabled">#define KERNELSPECS_H</div>

<div class="disabled">#include &quot;DriverSpecs.h&quot;</div>

<div class="disabled">#if _MSC_VER &gt; 1000 // [</div>
#pragma once
<div class="disabled">#endif // ]</div>

<div class="disabled">#ifdef __cplusplus // [</div>
<div class="token cpp_keyword ">extern</div> <div class="token cpp_string ">&quot;C&quot;</div> {
<div class="disabled">#endif // ]</div>

    <div class="token cpp_comment ">// ---------------------------------------------------------------------</div>
    <div class="token cpp_comment ">// The symbolic IRQL values can sometimes end up undefined, so define</div>
    <div class="token cpp_comment ">// the usual ones here, for PREfast purposes only.</div>

<div class="disabled">    #define DISPATCH_LEVEL 2</div>
<div class="disabled">    #define APC_LEVEL 1</div>
<div class="disabled">    #define PASSIVE_LEVEL 0</div>

<div class="disabled">    #if defined(_X86_)</div>
<div class="disabled">    #define HIGH_LEVEL 31
    #endif</div>
<div class="disabled">    #if defined(_AMD64_)</div>
<div class="disabled">    #define HIGH_LEVEL 15
    #endif</div>
<div class="disabled">    #if defined(_ARM_)</div>
<div class="disabled">    #define HIGH_LEVEL 15
    #endif</div>
<div class="disabled">    #if defined(_IA64_)</div>
<div class="disabled">    #define HIGH_LEVEL 15
    #endif</div>
<div class="disabled">    #if defined(_ARM64_)</div>
<div class="disabled">    #define HIGH_LEVEL 15
    #endif</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// ---------------------------------------------------------------------</div>
    <div class="token cpp_comment ">// IRQL annotations:</div>
    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// _IRQL_raises_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_requires_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_requires_max_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_requires_min_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_saves_</div>
    <div class="token cpp_comment ">// _IRQL_saves_global_(kind,param)</div>
    <div class="token cpp_comment ">// _IRQL_restores_</div>
    <div class="token cpp_comment ">// _IRQL_restores_global_(kind,param)</div>
    <div class="token cpp_comment ">// _IRQL_always_function_min_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_always_function_max_(irql)</div>
    <div class="token cpp_comment ">// _IRQL_requires_same_</div>
    <div class="token cpp_comment ">// _IRQL_uses_cancel_</div>
    <div class="token cpp_comment ">// </div>
    <div class="token cpp_comment ">// Legacy IRQL annotations:</div>
    <div class="token cpp_comment ">//   Legacy annotation:        Use instead:</div>
    <div class="token cpp_comment ">//   __drv_setsIRQL            (Obsolete, use _IRQL_raises_)</div>
    <div class="token cpp_comment ">//   __drv_raisesIRQL          _IRQL_raises_</div>
    <div class="token cpp_comment ">//   __drv_requiresIRQL        _IRQL_requires_</div>
    <div class="token cpp_comment ">//   __drv_maxIRQL             _IRQL_requires_max_</div>
    <div class="token cpp_comment ">//   __drv_minIRQL             _IRQL_requires_min_</div>
    <div class="token cpp_comment ">//   __drv_savesIRQL           _IRQL_saves_</div>
    <div class="token cpp_comment ">//   __drv_savesIRQLGlobal     _IRQL_saves_global_</div>
    <div class="token cpp_comment ">//   __drv_restoresIRQL        _IRQL_restores_</div>
    <div class="token cpp_comment ">//   __drv_restoresIRQLGlobal  _IRQL_restores_global_</div>
    <div class="token cpp_comment ">//   __drv_minFunctionIRQL     _IRQL_always_function_min_</div>
    <div class="token cpp_comment ">//   __drv_maxFunctionIRQL     _IRQL_always_function_max_</div>
    <div class="token cpp_comment ">//   __drv_sameIRQL            _IRQL_requires_same_</div>
    <div class="token cpp_comment ">//   __drv_useCancelIRQL       _IRQL_uses_cancel_</div>
    <div class="token cpp_comment ">//</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The function exits at IRQL irql (obsolete, use _IRQL_raises_)</div>
    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// &apos;;&apos; inside the parens to keep MIDL happy</div>
<div class="disabled">    __ANNOTATION(SAL_IRQL(__int64);)</div>
<div class="disabled">    #undef __drv_setsIRQL</div>
<div class="disabled">    #define __drv_setsIRQL(irql)                                              \</div>
<div class="disabled">        _SAL1_Source_(__drv_setsIRQL, (), _Post_ _SA_annotes1(SAL_IRQL,irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The function exits at IRQL irql, but this may only raise the irql.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_raiseIRQL(__int64);)</div>
<div class="disabled">    #undef _IRQL_raises_</div>
<div class="disabled">    #define _IRQL_raises_(irql)                                               \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_raises_, (), _Post_ _SA_annotes1(SAL_raiseIRQL,irql))</div>
<div class="disabled">    #undef __drv_raisesIRQL</div>
<div class="disabled">    #define __drv_raisesIRQL(irql) _SAL1_Source_(__drv_raisesIRQL, (), _IRQL_raises_(irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The called function must be entered at IRQL level</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_IRQL(__int64);)</div>
<div class="disabled">    #undef _IRQL_requires_</div>
<div class="disabled">    #define _IRQL_requires_(irql)                                             \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_requires_, (irql), _Pre_ _SA_annotes1(SAL_IRQL,irql))</div>
<div class="disabled">    #undef __drv_requiresIRQL</div>
<div class="disabled">    #define __drv_requiresIRQL(irql) _SAL1_Source_(__drv_requiresIRQL, (), _IRQL_requires_(irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The maximum IRQL at which the function may be called.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_maxIRQL(__int64);)</div>
<div class="disabled">    #undef _IRQL_requires_max_</div>
<div class="disabled">    #define _IRQL_requires_max_(irql)                                         \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_requires_max_, (irql), _Pre_ _SA_annotes1(SAL_maxIRQL,irql))</div>
<div class="disabled">    #undef __drv_maxIRQL</div>
<div class="disabled">    #define __drv_maxIRQL(irql) _SAL1_Source_(__drv_maxIRQL, (), _IRQL_requires_max_(irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The minimum IRQL at which the function may be called.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_minIRQL(__int64);)</div>
<div class="disabled">    #undef _IRQL_requires_min_</div>
<div class="disabled">    #define _IRQL_requires_min_(irql)                                         \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_requires_min_, (irql), _Pre_ _SA_annotes1(SAL_minIRQL,irql))</div>
<div class="disabled">    #undef __drv_minIRQL</div>
<div class="disabled">    #define __drv_minIRQL(irql) _SAL1_Source_(__drv_minIRQL, (), _IRQL_requires_min_(irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The current IRQL is saved in the annotated parameter</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_saveIRQL(void);)</div>
<div class="disabled">    #undef _IRQL_saves_</div>
<div class="disabled">    #define _IRQL_saves_                                                      \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_saves_, (), _Post_ _SA_annotes0(SAL_saveIRQL))</div>
<div class="disabled">    #undef __drv_savesIRQL</div>
<div class="disabled">    #define __drv_savesIRQL _SAL1_Source_(__drv_savesIRQL, (), _IRQL_saves_) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The current IRQL is saved in the (otherwise anonymous) global object</div>
    <div class="token cpp_comment ">// identified by kind and further refined by param.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_saveIRQLGlobal(__In_impl_ char *, ...);)</div>
<div class="disabled">    #undef _IRQL_saves_global_</div>
<div class="disabled">    #define _IRQL_saves_global_(kind,param)                                   \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_saves_global_, (kind, param), _Post_ _SA_annotes2(SAL_saveIRQLGlobal,#kind, param\t))</div>
<div class="disabled">    #undef __drv_savesIRQLGlobal</div>
<div class="disabled">    #define __drv_savesIRQLGlobal(kind,param) _SAL1_Source_(__drv_savesIRQLGlobal, (), _IRQL_saves_global_(kind, param)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The current IRQL is restored from the annotated parameter</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_restoreIRQL(void);)</div>
<div class="disabled">    #undef _IRQL_restores_</div>
<div class="disabled">    #define _IRQL_restores_                                                   \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_restores_, (), _Post_ _SA_annotes0(SAL_restoreIRQL))</div>
<div class="disabled">    #undef __drv_restoresIRQL</div>
<div class="disabled">    #define __drv_restoresIRQL _SAL1_Source_(__drv_restoresIRQL, (), _IRQL_restores_) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The current IRQL is restored from the (otherwise anonymous) global</div>
    <div class="token cpp_comment ">// object identified by kind and further refined by param.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_restoreIRQLGlobal(__In_impl_ char *, ...);)</div>
<div class="disabled">    #undef _IRQL_restores_global_</div>
<div class="disabled">    #define _IRQL_restores_global_(kind,param)                                \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_restores_global_, (kind, param), _Post_ _SA_annotes2(SAL_restoreIRQLGlobal, #kind, param\t))</div>
<div class="disabled">    #undef __drv_restoresIRQLGlobal</div>
<div class="disabled">    #define __drv_restoresIRQLGlobal(kind,param) _SAL1_Source_(__drv_restoresIRQLGlobal, (), _IRQL_restores_global_(kind, param)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The minimum IRQL to which the function can lower itself. The IRQL</div>
    <div class="token cpp_comment ">// at entry is assumed to be that value unless overridden.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_minFunctionIrql(__int64);)</div>
<div class="disabled">    #undef _IRQL_always_function_min_</div>
<div class="disabled">    #define _IRQL_always_function_min_(irql)                                  \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_always_function_min_, (irql), _Pre_ _SA_annotes1(SAL_minFunctionIrql,irql))</div>
<div class="disabled">    #undef __drv_minFunctionIRQL</div>
<div class="disabled">    #define __drv_minFunctionIRQL(irql) _SAL1_Source_(__drv_minFunctionIRQL, (), _IRQL_always_function_min_(irql)) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The maximum IRQL to which the function can raise itself.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_maxFunctionIrql(__int64);)</div>
<div class="disabled">    #undef _IRQL_always_function_max_</div>
<div class="disabled">    #define _IRQL_always_function_max_(irql)                                  \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_always_function_max_, (irql), _Pre_ _SA_annotes1(SAL_maxFunctionIrql,irql))</div>
<div class="disabled">    #undef __drv_maxFunctionIRQL</div>
<div class="disabled">    #define __drv_maxFunctionIRQL(irql) _SAL1_Source_(__drv_maxFunctionIRQL, (), _IRQL_always_function_max_(irql) ) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The function must exit with the same IRQL it was entered with.</div>
    <div class="token cpp_comment ">// (It may change it but it must restore it.)</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_sameIRQL(void);)</div>
<div class="disabled">    #undef _IRQL_requires_same_</div>
<div class="disabled">    #define _IRQL_requires_same_                                              \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_requires_same_, (), _Post_ _SA_annotes0(SAL_sameIRQL))</div>
<div class="disabled">    #undef __drv_sameIRQL</div>
<div class="disabled">    #define __drv_sameIRQL _SAL1_Source_(__drv_sameIRQL, (), _IRQL_requires_same_) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The annotated parameter contains the cancelIRQL, which will be restored</div>
    <div class="token cpp_comment ">// by the called function.</div>
    <div class="token cpp_comment ">//</div>
<div class="disabled">    __ANNOTATION(SAL_UseCancelIrql(void);)</div>
<div class="disabled">    #undef _IRQL_uses_cancel_</div>
<div class="disabled">    #define _IRQL_uses_cancel_                                                \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_uses_cancel_, (), _Post_ _SA_annotes0(SAL_UseCancelIrql))</div>
<div class="disabled">    #undef __drv_useCancelIRQL</div>
<div class="disabled">    #define __drv_useCancelIRQL _SAL1_Source_(__drv_useCancelIRQL, (), _IRQL_uses_cancel_) /* legacy */</div>

    <div class="token cpp_comment ">//</div>
    <div class="token cpp_comment ">// The annotated parameter is an IRQL that will be restored and a new (probably the same)</div>
    <div class="token cpp_comment ">// value will be inserted.  (Use this in preference to directly coding it.)</div>
<div class="disabled">    #undef _IRQL_inout_</div>
<div class="disabled">    #define _IRQL_inout_                                                      \</div>
<div class="disabled">        _IRQL_saves_ _IRQL_restores_</div>


<div class="disabled">#ifdef _PREFAST_ // RC workaround; already #defined to nothing if not needed</div>
<div class="disabled">    // Passing the cancel Irql to a utility function</div>
<div class="disabled">    #undef _IRQL_is_cancel_</div>
<div class="disabled">    #define _IRQL_is_cancel_                                                  \</div>
<div class="disabled">        _SAL2_Source_(_IRQL_is_cancel_, (), _IRQL_uses_cancel_                \</div>
<div class="disabled">        _Releases_nonreentrant_lock_(_Global_cancel_spin_lock_)               \</div>
<div class="disabled">        _At_(return, _IRQL_always_function_min_(DISPATCH_LEVEL)               \</div>
<div class="disabled">                 _IRQL_requires_(DISPATCH_LEVEL))</div>
<div class="disabled">    #undef __drv_isCancelIRQL</div>
<div class="disabled">    #define __drv_isCancelIRQL _SAL1_Source_(__drv_isCancelIRQL, (), _IRQL_is_cancel_) /* legacy */</div>
<div class="disabled">#endif</div>

<div class="disabled">#ifdef __cplusplus</div>
}
<div class="disabled">#endif</div>

<div class="disabled">#endif // KERNELSPECS_H
</div>
</div></div>
<script type="text/javascript">
referencedSymbols = {
};
symbolToFiles = {

};
turnOnSymbol();
</script>
</body>
</html>
